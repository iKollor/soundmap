# ===========================================
# Coolify Deployment Environment Variables
# COPY THESE TO COOLIFY -> PROJECT -> ENVIRONMENT VARIABLES
# ===========================================

# --- PostgreSQL ---
POSTGRES_USER=soundmap
POSTGRES_PASSWORD=generate_secure_password_here
POSTGRES_DB=soundmap

# --- Garage S3 ---
GARAGE_RPC_SECRET=generate_long_random_secret_string_here
GARAGE_ADMIN_TOKEN=generate_secure_token_here
# Note: S3_ACCESS_KEY and S3_SECRET_KEY will need to be generated 
# from the Garage WebUI (or CLI) AFTER the service starts for the first time.
# For initial deploy, you might set placeholders or wait to add them.
S3_ACCESS_KEY=placeholder_until_generated
S3_SECRET_KEY=placeholder_until_generated

# --- Application S3 Config ---
S3_BUCKET_SOUNDS=sounds
S3_BUCKET_WAVEFORMS=waveforms

# --- Keycloak (EXTERNAL AUTH SERVER) ---
# IMPORTANT: This URL must be accessible FROM the Docker containers!
# If Keycloak is hosted externally (different server), use the public URL.
# Example: https://auth.your-domain.com/realms/soundmap
KEYCLOAK_ISSUER=https://auth.your-domain.com/realms/soundmap
KEYCLOAK_CLIENT_ID=soundmap-app
KEYCLOAK_CLIENT_SECRET=your_client_secret_here

# Keycloak Client Requirements:
# - Client Protocol: openid-connect
# - Access Type: confidential
# - Direct Access Grants Enabled: ON (for credentials login)
# - Service Account Enabled: ON (for user registration)
# - Redirect URIs: https://your-soundmap-domain.com/*
# - Web Origins: https://your-soundmap-domain.com

# --- Next.js / Web ---
# This often gets set automatically by Coolify, but good to have explicit:
COOLIFY_URL=https://your-soundmap-domain.com
NEXT_PUBLIC_MAP_STYLE_URL=https://tiles.your-domain.com/styles/basic/style.json
NEXTAUTH_SECRET=generate_secure_nextauth_secret_here

# --- Worker ---
# INTERNAL_WEBHOOK_URL is set to http://web:3000 in docker-compose, 
# but can be overridden here if needed.
